# 성능 튜닝
- fetchSize 설정인 **defaultFetchSize(전역) / \<select fetchSize="?">(XML)** 을 설정한다.
<br>

## 성능 튜닝 원리
- Cursor를 사용할 경우 기본 fetchSize를 이용하여 10개의 행을 받아오고, 이 10건을 커서를 통해 한 건씩 처리한 뒤 다 떨어지면 다시 10개 행을 요청하는 방식으로 동작한다.
- 만약 WAS 서버의 성능이 좋아서 데이터를 받아오는 시간보다 처리하는 시간이 짧다면, DB 서버에 추가 데이터를 요청하는 빈도가 높아질수록 성능에는 손해를 보게된다.<br>
✔️ 즉, Cursor가 미리 받아놓고 처리하는 데이터 양을 늘리면 성능이 개선될 수 있다.<br>
✔️ 또한, fetchSize가 작을 때에 비해 DB 연결을 빨리 반납해줄수 있는 장점도 있다. 이러한 방식을 Prefetch라고 한다.<br>

Mapper XML에서 fetchSize를 변경한 예시를 들어보면
````
<select id="selectExcel" parameterType="excelVO" fetchSize="1024" resultType="java.util.LinkedHashMap">
````
- 여기서 fetchSize는 벤치마크 및 충분한 테스트를 통해서 적정선으로 설정해주면 된다.
  - 무리해서 조절할 경우 안하느니 못한 성능이 나올 수 있으니 조심해야한다.
  - 또한, 만약 1만건 추출 제한을 걸고자하는데 fetchSize가 1만건 이상인 경우 이러한 기능의 이점이 없어지니 잘 생각하며 사용해야한다!
